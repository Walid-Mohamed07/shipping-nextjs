# Quick Reference: Finish Remaining 10 Routes\n\nAll routes use this **universal template**:\n\n`typescript\nimport { NextRequest, NextResponse } from 'next/server'\nimport { connectDB, handleError } from '@/lib/db'\nimport { Model } from '@/lib/models'\n\n/**\n * @swagger\n * /api/path:\n *   method:\n *     summary: Action description\n *     tags: [Category]\n *     responses: { 200: { description: Success } }\n */\nexport async function METHOD(request: NextRequest) {\n  try {\n    await connectDB()\n    const data = await Model.find({}).lean()\n    return NextResponse.json(data, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n---\n\n## The 10 Remaining Routes\n\n### 1. `admin/orders` - GET\n**File:** `app/api/admin/orders/route.ts`\n**Model:** `Request`\n**Query:** `Request.find({}).populate('userId')`\n\n### 2. `admin/resources` - GET \n**File:** `app/api/admin/resources/route.ts`\n**Model:** `User`\n**Query:** `User.find({ role: { $in: ['driver', 'operator'] } })`\n\n### 3. `requests/[id]` - GET\n**File:** `app/api/requests/[id]/route.ts`\n**Model:** `Request`\n**Query:** `Request.findById(id).populate('userId')`\n\n### 4. `requests/[id]/submit-offer` - POST\n**File:** `app/api/requests/[id]/submit-offer/route.ts`\n**Model:** `Request`\n**Action:** Update request with costOffers array\n\n### 5. `requests/manage` - GET|POST\n**File:** `app/api/requests/manage/route.ts`\n**Model:** `Request` \n**GET:** List with filters\n**POST:** Bulk update\n\n### 6. `company/accept-offer` - POST\n**File:** `app/api/company/accept-offer/route.ts`\n**Model:** `Request`\n**Action:** Mark offer as accepted, update assignedCompanyId\n\n### 7. `company/assign-warehouse` - POST\n**File:** `app/api/company/assign-warehouse/route.ts`\n**Model:** `Request` \n**Action:** Update assignedWarehouse field\n\n### 8. `user/addresses` - GET|POST\n**File:** `app/api/user/addresses/route.ts`\n**Model:** `User`\n**Action:** Update locations array\n\n### 9. `reverse-geocode` - POST\n**File:** `app/api/reverse-geocode/route.ts`\n**Model:** None (external API)\n**Action:** Call Google Maps or similar\n\n### 10. `upload/media` - POST\n**File:** `app/api/upload/media/route.ts`\n**Model:** None (file upload)\n**Action:** Store file, return URL\n\n---\n\n## Copy-Paste Solutions\n\n### Admin Orders\n`typescript\nimport { connectDB, handleError } from '@/lib/db'\nimport { Request } from '@/lib/models'\n\nexport async function GET() {\n  try {\n    await connectDB()\n    const orders = await Request.find({}).populate('userId').lean()\n    return NextResponse.json({ orders }, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n### Request by ID\n`typescript\nexport async function GET(request: NextRequest, { params }: any) {\n  try {\n    await connectDB()\n    const { id } = params\n    const req = await Request.findById(id).populate('userId').lean()\n    if (!req) return NextResponse.json({ error: 'Not found' }, { status: 404 })\n    return NextResponse.json(req, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n### Submit Offer (POST)\n`typescript\nexport async function POST(request: NextRequest, { params }: any) {\n  try {\n    await connectDB()\n    const { id } = params\n    const body = await request.json()\n    const { companyId, costAmount } = body\n    \n    const req = await Request.findByIdAndUpdate(\n      id,\n      {\n        $push: {\n          costOffers: {\n            companyId,\n            costAmount,\n            status: 'pending',\n            createdAt: new Date()\n          }\n        }\n      },\n      { new: true }\n    )\n    \n    return NextResponse.json({ request: req }, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n### Company Accept Offer (POST)\n`typescript\nexport async function POST(request: NextRequest) {\n  try {\n    await connectDB()\n    const { requestId, offerId, companyId } = await request.json()\n    \n    const req = await Request.findByIdAndUpdate(\n      requestId,\n      {\n        assignedCompanyId: companyId,\n        requestStatus: 'Assigned to Company',\n        'costOffers.$[elem].status': 'accepted'\n      },\n      {\n        new: true,\n        arrayFilters: [{ 'elem._id': offerId }]\n      }\n    )\n    \n    return NextResponse.json({ success: true }, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n### User Addresses\n`typescript\nexport async function GET(request: NextRequest) {\n  try {\n    await connectDB()\n    const userId = request.nextUrl.searchParams.get('userId')\n    const user = await User.findById(userId).select('locations').lean()\n    return NextResponse.json({ locations: user?.locations || [] }, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    await connectDB()\n    const { userId, location } = await request.json()\n    \n    const user = await User.findByIdAndUpdate(\n      userId,\n      { $push: { locations: location } },\n      { new: true }\n    )\n    \n    return NextResponse.json({ locations: user.locations }, { status: 201 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n### Pass-Through Routes (No DB)\n\n**Reverse Geocode (external API):**\n`typescript\n// Just remove fs/path imports, call external API\nexport async function POST(request: NextRequest) {\n  try {\n    const { latitude, longitude } = await request.json()\n    // Call Google Maps API\n    const response = await fetch(...)\n    const data = await response.json()\n    return NextResponse.json(data, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n**Upload Media (file handling):**\n`typescript\n// Keep as-is, just remove fs references if using cloud storage\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n    const file = formData.get('file') as File\n    // Store using: AWS S3, Cloudinary, etc.\n    // Return { url: uploadedUrl }\n    return NextResponse.json({ url }, { status: 200 })\n  } catch (error) {\n    return handleError(error)\n  }\n}\n`\n\n---\n\n## Completion Checklist\n\n- [ ] admin/orders\n- [ ] admin/resources \n- [ ] requests/[id]\n- [ ] requests/[id]/submit-offer\n- [ ] requests/manage\n- [ ] company/accept-offer\n- [ ] company/assign-warehouse\n- [ ] user/addresses\n- [ ] reverse-geocode\n- [ ] upload/media\n\n**Estimated time per route:** 3-5 minutes\n**Total time:** 30-50 minutes\n\n---\n\n## Testing Each Route\n\n1. Update route file\n2. Save (Next.js auto-reloads)\n3. Go to http://localhost:3000/swagger\n4. Find your endpoint\n5. Click \"Try it out\"\n6. Enter test data\n7. Click \"Execute\"\n8. Verify response\n\n**That's it!** Repeat for all 10 remaining routes.\n\n---\n\n**After completing all 10 routes, your MongoDB migration will be 100% complete!**\n
